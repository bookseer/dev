---
jupytext:
  text_representation:
    extension: .md
    format_name: myst
kernelspec:
  display_name: Python 3
  language: python
  name: python3
---

(tmux_configuring)=
# Настройка tmux

Сейчас, уже имея некоторый опыт работы с tmux, давайте создадим собственную конфигурацию, которую сможем использовать
для наших остальных рабочих задач.

tmux по умолчанию имеет не самые удобные настройки. 
Многие из наиболее важных и полезных функции назначаются труднодоступным сочетаниям клавиш или состоят из длинных многословных команд. 
А цветовая схема tmux по умолчанию не особенно приятна для глаз. 
В этом разделе мы создадим базовый конфигурационный файл, который затем будем использовать в оставшейся части руководства. 
После изучения данного материала, у вас будет лучшее представление о том, насколько гибок tmux, и вы сможете конфигурировать его самостоятельно.
Давайте начнем с разговора о том, что нужно настроить в tmux в первую очередь.


## Файл .tmux.conf

По умолчанию tmux ищет параметры конфигурации в двух местах. 
Сначала в **/etc/tmux.conf** он ищет общесистемную конфигурацию. 
Затем --- файл с именем **.tmux.conf** в домашнем каталоге текущего пользователя. 
Если эти файлы не существуют, tmux просто использует настройки по умолчанию. 
Нам не нужно создавать общесистемный файл конфигурации, поэтому давайте создадим пустой файл конфигурации в нашем домашнем каталоге. 
Для этого можно использовать следующую команду:
```console
$ touch ~/.tmux.conf 
```

В этом файле мы можем делать все, от определения новых сочетаний клавиш до настройки окружения по умолчанию с нескольими окнами, панелями и запущенными программами. 
Давайте начнем с установки нескольких основных параметров, которые сделают работу с tmux намного проще.

:::{note}
Файл .tmux.conf является скрытым и не отображается в файловых менеджерах или списках каталогов по умолчанию. 
:::


## Назначение более простого префикса
tmux использует {bdg-dark}`Ctrl`-{bdg-dark}`b` в качестве префикса команд.
Многие пользователи tmux начинали с GNUScreen, который использует {bdg-dark}`Ctrl`-{bdg-dark}`a` для префикса команд.
{bdg-dark}`Ctrl` --- отличный выбор для префикса, потому что легко доступен, особенно если переназначить клавишу {bdg-dark}`Caps Lock` на {bdg-dark}`Ctrl`, как описано на далее.
Это позволит для большинства действий не убирать руки с центрального ряда клавиатуры.

:::{note}
**Переназначение клавиши `Caps Lock`**
На многих клавиатурах клавиша {bdg-dark}`Caps Lock` находится рядом с клавишей {bdg-dark}`a` в центральном ряду клавиатуры.
Переназначив эту клавишу на {bdg-dark}`Ctrl`, можно сделать запуск команд более удобным.
На Mac переназначить клавишу {bdg-dark}`Caps Lock` можно в панели настроек клавиатуры в разделе «Системные настройки». Просто нажмите кнопку «Клавиши-модификаторы» и измените действие для {bdg-dark}`Caps Lock` на «Control».

Под Linux этот процесс может быть немного сложнее в зависимости от используемого дистрибутива или оконного менеджера, но можете найти несколько способов, [в вики Emacs](http://www.emacswiki.org/emacs/MovingT heCtrlKey).
Это небольшое изменение в конфигурации может сэкономить удивительное количество времени в течение дня.
:::


Чтобы установить параметры в файле .tmux.conf, используется команда `set-option`, которую можно сократить до `set`.
Для переопределения префикса tmux, нужно добавить в файл .tmux.conf следующие строки:

```
.tmux.conf

# Setting the prefix from C-b to C-a
set -g prefix C-a
```

В этом примере используется параметр `-g` «глобально», который устанавливает параметр для всех создаваемых сеансов tmux.
Строка, начинающаяся с `#`, является комментарием.
Рекомендуется оставлять комментарии в конфигурационных файлах, так как они помогут вспомнить значения настроек, когда вы вернетесь и посмотрите на свою конфигурацию через несколько месяцев.
Комментарии в файле конфигурации tmux работают так же, как комментарии в исходном коде.

Хотя, в данном случае, в этом нет необходимости, можно использовать `unbind-key` или команду `unbind`, чтобы удалить привязку клавиш, которая была определена до этого, чтобы позже назначить другую команду этой клавише.
Освободим {bdg-dark}`Ctrl`-{bdg-dark}`b` вот так:

```
.tmux.conf

# Free the original Ctrl-b prefix keybinding
unbind C-b
```
:::{note}
Изменения в файле не считываются tmux автоматически.
Поэтому, если редактировать файл .tmux.conf когда tmux запущен, необходимо либо полностью закрыть все сеансы tmux, либо войти в командный режим tmux с помощью {bdg-dark}`PREFIX` {bdg-dark}`:` и ввести:
```console
: source-file ~/.tmux.conf
```
:::
Теперь можно использовать {bdg-dark}`Ctrl`-{bdg-dark}`a` в качестве префикса.
Остальные примеры в этом руководстве будут по-прежнему ссылаться на него как на {bdg-dark}`PREFIX`.

